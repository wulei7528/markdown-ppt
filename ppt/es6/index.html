<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>es6 核心特性</title>

		<link rel="stylesheet" href="../../css/reveal.css">
		<link rel="stylesheet" href="../../css/theme/serif.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../../lib/css/zenburn.css">

		<style>
			.reveal h1,
			.reveal h2,
			.reveal h3,
			.reveal h4,
			.reveal h5,
			.reveal h6 {
				text-transform: none;
			}

			.reveal pre code {
				padding: 15px;
			}

			.reveal .slide-background {
				background: #ddd;
			}

			.reveal section img {
				border: none;
			}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../../css/print/pdf.css' : '../../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>ES6 core features</h2>
					<p>wulei6@xiaomi.com</p>
				</section>
				<section>
					<h3>structure preview</h3>
					<img width="880" height="552" src="core-feature.jpg">
				</section>
				<section data-markdown>
					<script type="text/template">
						### let & const: block-scoped
						#### *VS* var: function-scoped
						```javascript
						let x = 1
						let y = 1
						function func() {
							if(false) {
								var x = 2	//scope: whole function
								let y = 2	//scope: block
							}

							console.log(`x=${x}`)
							console.log(`y=${y}`)
						}
						func()
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						```javascript
						for(var i = 0; i < 5; i++) {
							setTimeout(function() { console.log(i) })
						}

						for(var i = 0; i < 5; i++) {
							(function(i){
								setTimeout(function() {
									console.log(i)
								})
							})(i)
						}

						for(let i = 0; i < 5; i++) {
							setTimeout(function() { console.log(i) })
						}
						```
					</script>
				</section>
				<section>
					<h3>Ways of declaring variables</h3>
					<img width="873" height="331" src="var-declare.png">
				</section>
				<section data-markdown>
					<script type="text/template">
						### let & const: best practice
						```javascript
						{
							const number = 123
							const object = {
								a: 1
							}
							let modifyFlag = true
							
							modifyFlag = false

							for(let i = 0; i < 5; i++) {}
						}
						```

						advice: prefer const, otherwise let, avoid var
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### template literals
						```javascript
						const name = 'leo'

						console.log('My name is "' + name + '"')

						console.log(`My name is "${name}"`)

						const html = 
						`
							<html>
								<body>hello ${name}</body>
							</html>
						`
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### arrow functions: syntax
						```javascript
						var oldFunc = function(v) {}
						
						const fun1 = () => {}       // no param
						const fun2 = (v1, v2) => {} // several params
						const fun3 = v => {}        // one param
						const fun4 = (a,b) => a + b // only a expression 
						const fun5 = (v1, v2) => { 
							v3 = 1                  // several statements
							return v1 + v2 + v3
						}
						const func6 = () => ({name: 'leo'}) // return an obj
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### arrow functions *vs*
						#### tradional functions
						```javascript
						function Person() {
							this.age = 0

							setInterval(function() {
								this.age++
							}, 1000)
						}
						// solve 1
						function Person() {
							var that = this
							this.age = 0
							setInterval(function() {
								that.age++
							}, 1000)
						}
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						```javascript
						// solve 2
						function Person() {
							this.age = 0
							setInterval(function() {
								this.age++
							}.bind(this), 1000)
						}
						// solve 3:arrow functions do not have its own this
						function Person() {
							this.age = 0
							setInterval(() => {
								this.age++
							}, 1000)
						}
						```
					</script>
				</section>
				<section>
					<h3>arrow functions:best practice</h3>
					<img width="824" height="174" src="arrow.png">
				</section>
				<section data-markdown>
					<script type="text/template">
						### destructuring: syntax
						```javascript
						const obj = { first: '1', second: '2' }

						const ff = obj.first
						
						const { first: f, second: s } = obj
						const { first, second } = obj

						const arr = ['a', 'b']
						const [x, y] = arr
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### destructuring: advanced
						```javascript
						const obj = { first: '1', second: '2', forth: '4' }
						const { third: t = '3' } = obj

						const [a, b] = 'hello'
						const { length: len } = '123'

						const { second, ...rest } = obj
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### destructuring: best practice
						```javascript
						function func() {
							return [1, 2, 3]
						}

						const [a, b, c] = func()

						function effect({ payload }, { put, call }) {
							console.log(payload)
						}

						const { KeyCenter } = require('../')
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### spread operator
						```javascript
						Math.max(-1, 5, 2)
						Math.max(...[-1, 5, 2])

						const arr1 = ['a', 'b']
						const arr2 = ['c', 'd']
						arr1.push(...arr2)      
						// Array.prototype.push.apply(arr1, arr2)

						const d = new Date(...[2018, 11, 24])

						const x = ['a', 'b']
						const y = ['c', 'd']
						const xy = [...x, ...y]	// const xy = x.concat(y)
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### rest parameter
						```javascript
						function sum() {
							let sum = 0
							for(var i = 0; i　< arguments.length; i++) {
								sum += arguments[i]
							}
							return sum
						}

						function sum(...args) {
							let sum = 0
							for(const arg of args) {
								sum += arguments[i]
							}
							return sum
						}

						```
					</script>
				</section>
				<section>
					<h3>spread operator VS rest parameter</h3>
					<img width="824" height="342" src="dot.png">
				</section>
				<section data-markdown>
					<script type="text/template">
						### for...of
						```javascript
						var arr = [1, 2, 3]
						for (var i = 0; i < arr.length; i++) { //can break
							console.log(arr[i])
						}

						arr.forEach(function(item) {           //conciseness
							console.log(item)
						})

						for(const item of arr) {   //can break & conciseness
							console.log(item)
						}
						for(const [index, item] of arr.entries()) {
							console.log(`${index}-${item}`)
						}
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### class
						```javascript
						function OldClass(name) {
							this.name = name
						}
						OldClass.prototype.getName = function() {
							return this.name
						}

						class NewClass {
							constructor(name) {
								this.name = name
							}
							getName() {
								return this.name
							}
						}
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### class: problem with this
						```javascript
						class ReactComponent {
							constructor() {
								this.name = '123'
							}

							handlerClick() {
								console.log(this.name)
							}

							render() {
								const dom = document.createElement('div')
								dom.onclick = this.handlerClick
								dom.click()
							}
						}

						new ReactComponent().render()
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### class: problem with this
						```javascript
						class ReactComponent {
							constructor() {
								this.name = '123'
							}

							handlerClick = () => {
								console.log(this.name)
							}
							/*
							handlerClick() {
								console.log(this.name)
							}*/

							render() {
								const dom = document.createElement('div')
								dom.onclick = this.handlerClick
								//dom.onclick = this.handlerClick.bind(this)
								dom.click()
							}
						}

						new ReactComponent().render()
						```
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						### promise
						```javascript
						```
					</script>
				</section>
				<section>
					<h3>module</h3>
				</section>
			</div>
		</div>

		<script src="../../lib/js/head.min.js"></script>
		<script src="../../js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				backgroundTransition: 'convex',
				dependencies: [
					{ src: '../../plugin/markdown/marked.js' },
					{ src: '../../plugin/markdown/markdown.js' },
					{ src: '../../plugin/notes/notes.js', async: true },
					{ src: '../../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
